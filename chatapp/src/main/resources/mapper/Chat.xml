<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.eunbee.chatapp.dao.ChatDAO">
	<select id="getAllChats" resultType="ChatDTO">
		SELECT name FROM chat
	</select>
	
	<select id="getChatsTest" resultType="String">
		SELECT name FROM chat
	</select>
	
	<select id="getJoinedChats" parameterType="String" resultType="String" >
		SELECT chat.name
		FROM chat
		INNER JOIN member_chat
		ON chat.id = member_chat.chat_id
		AND member_chat.member_id = #{id}
		AND member_chat.isJoin = 1
	</select>
	
	<select id="getNotJoinedChats" parameterType="String" resultType="String" >
		SELECT chat.name
		FROM chat
		INNER JOIN member_chat
		ON chat.id = member_chat.chat_id
		AND member_chat.member_id = #{id}
		AND member_chat.isJoin = 0
	</select>
	
	<select id="getAskedChats" parameterType="String" resultType="ChatDTO" >
		SELECT chat.name, member_chat.member_id
		FROM chat
		INNER JOIN member_chat
		ON chat.id = member_chat.chat_id
		AND chat.member_id = #{id}
		AND member_chat.isJoin = 0
	</select>
</mapper>